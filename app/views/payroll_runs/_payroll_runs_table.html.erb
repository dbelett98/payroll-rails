<% if payroll_runs.any? %>
  <div class="table-container">
    <table class="employee-table">
      <thead>
        <tr>
          <th class="th-name">Name / Period</th>
          <th class="th-client">Client</th>
          <th class="th-frequency">Frequency</th>
          <th class="th-status">Status</th>
          <th class="th-totals">Totals</th>
          <th class="th-dates">Run Date</th>
          <th class="th-actions">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% payroll_runs.each do |payroll_run| %>
          <tr class="payroll-run-row" onclick="window.location.href='<%= payroll_run_path(payroll_run) %>'">
            <td class="td-name">
              <div class="payroll-run-info">
                <div class="payroll-run-name">
                  <%= payroll_run.name.present? ? payroll_run.name : "Payroll Run ##{payroll_run.id}" %>
                </div>
                <div class="pay-period">
                  <%= payroll_run.pay_period_display %>
                </div>
              </div>
            </td>
            <td class="td-client">
              <%= payroll_run.client.name %>
            </td>
            <td class="td-frequency">
              <span class="frequency-badge">
                <%= payroll_run.pay_frequency&.titleize || 'Not Set' %>
              </span>
            </td>
            <td class="td-status">
              <span class="status-badge <%= payroll_run.status_badge_class %>">
                <%= payroll_run.status&.titleize %>
              </span>
            </td>
            <td class="td-totals">
              <div class="totals-info">
                <div class="gross-pay">
                  Gross: <%= number_to_currency(payroll_run.total_gross || 0) %>
                </div>
                <div class="net-pay">
                  Net: <%= number_to_currency(payroll_run.total_net || 0) %>
                </div>
              </div>
            </td>
            <td class="td-dates">
              <div class="date-info">
                <div class="run-date">
                  <%= payroll_run.run_date&.strftime('%m/%d/%Y') || 'Not Set' %>
                </div>
                <div class="created-date">
                  Created: <%= payroll_run.created_at.strftime('%m/%d') %>
                </div>
              </div>
            </td>
            <td class="td-actions">
              <div class="action-buttons" onclick="event.stopPropagation();">
                <%= link_to 'View', payroll_run_path(payroll_run), class: 'btn-edit' %>
                <% if payroll_run.editable? %>
                  <%= link_to 'Edit', edit_payroll_run_path(payroll_run), class: 'btn-edit' %>
                <% end %>
                <% if payroll_run.draft? %>
                  <%= button_to "Delete", payroll_run_path(payroll_run), method: :delete, 
                      data: { confirm: "Are you sure?" }, class: "btn-delete" %>
                <% end %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="empty-state">
    <p>No payroll runs found.</p>
    <% if @selected_client %>
      <%= link_to 'Create First Payroll Run', new_payroll_run_path(client_id: @selected_client.id), class: 'action-btn primary-btn' %>
    <% else %>
      <p>Select a client above to create payroll runs.</p>
    <% end %>
  </div>
<% end %>

<style>
  .payroll-run-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }
  
  .payroll-run-name {
    font-weight: 600;
    color: #1f2937;
  }
  
  .pay-period {
    font-size: 0.85rem;
    color: #6b7280;
  }
  
  .frequency-badge {
    background: #f3f4f6;
    color: #4b5563;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
  }
  
  .totals-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }
  
  .gross-pay {
    font-weight: 600;
    color: #059669;
  }
  
  .net-pay {
    font-size: 0.85rem;
    color: #6b7280;
  }
  
  .date-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }
  
  .run-date {
    font-weight: 500;
    color: #1f2937;
  }
  
  .created-date {
    font-size: 0.8rem;
    color: #9ca3af;
  }
  
  /* Column widths */
  .th-name, .td-name { width: 25%; }
  .th-client, .td-client { width: 15%; }
  .th-frequency, .td-frequency { width: 12%; }
  .th-status, .td-status { width: 12%; }
  .th-totals, .td-totals { width: 15%; }
  .th-dates, .td-dates { width: 12%; }
  .th-actions, .td-actions { width: 9%; }
</style>